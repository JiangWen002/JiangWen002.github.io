<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="永远相信美好的事情会发生">
<meta property="og:type" content="website">
<meta property="og:title" content="Javon">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Javon">
<meta property="og:description" content="永远相信美好的事情会发生">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javon">
<meta name="twitter:description" content="永远相信美好的事情会发生">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Javon</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Javon</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/22/react-antd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江文">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Javon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/22/react-antd/" itemprop="url">react+antd</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-22T09:54:30+08:00">
                2017-11-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div style="color:blue; text-align:center; font-size:30px"> 基于HapCloud+React+Mobx+Antd的前端实战开发总结</div>

<p><br><br></p>
<p><br><br></p>
<p><br><br></p>
<table>
<thead>
<tr>
<th style="text-align:center">作者：江文</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>写作日期：2017/8/6</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>QQ：512035611</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>Email:wen.jiang@hand-china.com</strong></td>
</tr>
</tbody>
</table>
<p><br><br></p>
<blockquote>
<p>​  Notes:本文档比较粗浅 仅供参考  谢谢阅读</p>
</blockquote>
<p><br></p>
<p><br></p>
<p>[TOC]</p>
<h1 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h1><pre><code>React是facebook开源的前端开发框架，Antd则是阿里巴巴蚂蚁金服封装的一套开源UI框架 适用于企业中台管理系统的开发,Mobx则是一种前端存储和更新应用状态的解决方案。
</code></pre><p>​    进行这样的开发需要有js基础，熟悉commonJS等模块规范，熟悉ES6语法及其特性，熟悉JSX规范，熟悉React的组件概念，生命周期，了解React-Router，了解Mobx,等等，后面我会对这部分进行一个最小化归纳，即完成这样的web应用需要的最小化知识结构，以方便快速上手。</p>
<h1 id="2-路由配置"><a href="#2-路由配置" class="headerlink" title="2.路由配置"></a>2.路由配置</h1><p>​    HapCloud采用react-router进行路由管理，实际上只能用它，React官方维护,通过管理 URL，实现组件的切换和状态的变化。</p>
<h2 id="2-1项目路由配置"><a href="#2-1项目路由配置" class="headerlink" title="2.1项目路由配置"></a>2.1项目路由配置</h2><p>​    在HapCloud中，每个前端项目都有自己的路由，路径一般在 <code>项目名/src/项目名/hdip/containers/***Index.js</code>中,下图是项目路由示例IAMIndex.js,示例代码均不完整，仅供解释.</p>
<p>​    asyncRouter和asyncLocaleProvider利用了Rx.js，实现多语言以及数据仓库Mobx组件的异步加载，Rx.js解决异步场景的复杂需求，即前端交互中接口请求、浏览器事件以及自定义事件，有对Rx.js感兴趣的小伙伴可以看下面几个地址：</p>
<ul>
<li><p>rxjs官网: <a href="http://reactivex.io/rxjs/" target="_blank" rel="noopener">http://reactivex.io/rxjs/</a></p>
</li>
<li><p>rxhjs教程: <a href="http://xgrommx.github.io/rx-book/content/observable/observable_instance_methods/toarray.html" target="_blank" rel="noopener">http://xgrommx.github.io/rx-book/content/observable/observable_instance_methods/toarray.html</a></p>
</li>
<li><p>常用rxjs方法的交互图: <a href="http://rxmarbles.com/" target="_blank" rel="noopener">http://rxmarbles.com/</a></p>
<p>在这里配置了指向各个功能页面的url及对应功能页面子路由的映射关系</p>
<p>附上react-router的中文文档链接： <a href="https://react-guide.github.io/react-router-cn/docs/API.html#history-mixin" target="_blank" rel="noopener">https://react-guide.github.io/react-router-cn/docs/API.html#history-mixin</a></p>
<p>​</p>
<blockquote>
<p>​    需要注意的是，这里配置了功能页面的url和功能页面子路由的映射关系，另外还要在<code>项目名/src/app/项目名/common/RouteMap.js</code>中配置前端菜单与这些url的映射关系</p>
</blockquote>
</li>
</ul>
<font size="1.5"><br><br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;  Route,  Switch&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">'mobx-react'</span></span><br><span class="line"><span class="keyword">import</span> asyncRouter <span class="keyword">from</span> <span class="string">'../../../util/asyncRouter'</span></span><br><span class="line"><span class="keyword">import</span> asyncLocaleProvider <span class="keyword">from</span> <span class="string">'../../../util/asyncLocaleProvider'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ClientIndex = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./organization/client/ClientIndex'</span>));</span><br><span class="line"><span class="keyword">const</span> PasswordPolicyIndex = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./organization/passwordPolicy/PasswordPolicyIndex'</span>));</span><br><span class="line"><span class="keyword">const</span> LDAPIndex = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./organization/ldap/LDAPIndex'</span>));</span><br><span class="line"><span class="keyword">const</span> OrganizationIndex = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./organization/organization/OrganizationIndex'</span>));</span><br><span class="line"><span class="keyword">const</span> ServiceIndex = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./organization/service/ServiceIndex'</span>));</span><br><span class="line"><span class="keyword">const</span> TokenIndex = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./organization/token/TokenIndex'</span>));</span><br><span class="line"><span class="keyword">const</span> Home = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./Home'</span>));</span><br><span class="line"></span><br><span class="line">@inject(<span class="string">"AppState"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IAMIndex</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; match, AppState &#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">const</span> langauge = AppState.currentLanguage;</span><br><span class="line">    <span class="keyword">const</span> IntlProviderAsync = asyncLocaleProvider(langauge, () =&gt; <span class="keyword">import</span>(<span class="string">`../locale/<span class="subst">$&#123;langauge&#125;</span>`</span>));</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;IntlProviderAsync&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;Switch&gt;</span><br><span class="line">            &lt;Route exact path=&#123;match.url&#125; component=&#123;Home&#125; /&gt;</span><br><span class="line">            &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;match.url&#125;</span>/client`</span>&#125; component=&#123;ClientIndex&#125; /&gt;</span><br><span class="line">            &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;match.url&#125;</span>/password-policy`</span>&#125; component=&#123;PasswordPolicyIndex&#125; /&gt;</span><br><span class="line">            &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;match.url&#125;</span>/user`</span>&#125; component=&#123;UserIndex&#125; /&gt;</span><br><span class="line">            &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;match.url&#125;</span>/ldap`</span>&#125; component=&#123;LDAPIndex&#125; /&gt;</span><br><span class="line">            &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;match.url&#125;</span>/upstream`</span>&#125; component=&#123;SystemConfig&#125; /&gt;</span><br><span class="line">          &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">      &lt;<span class="regexp">/IntlProviderAsync&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default IAMIndex;</span></span><br></pre></td></tr></table></figure><br><br></font>

<h2 id="2-2功能页面路由配置"><a href="#2-2功能页面路由配置" class="headerlink" title="2.2功能页面路由配置"></a>2.2功能页面路由配置</h2><p>​    每个功能页面路由配置的子路由，比较少</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  Route,</span><br><span class="line">  Switch,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span>;</span><br><span class="line"><span class="keyword">import</span> asyncRouter <span class="keyword">from</span> <span class="string">'../../../../../../util/asyncRouter'</span>;</span><br><span class="line"><span class="keyword">const</span> ThemeServers = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./ThemeServers'</span>) , () =&gt; <span class="keyword">import</span>(<span class="string">'../../../../stores/organization/dispatch/theme/ThemeServerStore'</span>));</span><br><span class="line"><span class="keyword">const</span> EditThemeServer = asyncRouter(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./EditThemeServer'</span>), () =&gt; <span class="keyword">import</span>(<span class="string">'../../../../stores/organization/dispatch/layer/LayerServerStore'</span>));</span><br><span class="line"><span class="keyword">const</span> ThemeServerIndex = <span class="function">(<span class="params">&#123; match &#125;</span>) =&gt;</span> (</span><br><span class="line">  &lt;Switch&gt;</span><br><span class="line">    &lt;Route exact path=&#123;match.url&#125; component=&#123;ThemeServers&#125; /&gt;</span><br><span class="line">    &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;match.url&#125;</span>/edit/:id`</span>&#125; component=&#123;EditThemeServer&#125; /&gt;</span><br><span class="line">  &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br><span class="line"><span class="regexp">export default ThemeServerIndex;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-3路由跳转组件实际运用"><a href="#2-3路由跳转组件实际运用" class="headerlink" title="2.3路由跳转组件实际运用"></a>2.3路由跳转组件实际运用</h2><p>​    实际使用非常方便，代码如下，执行handleOpe方法就会跳到一个编辑页面，并把参数头表id传过去。</p>
<p>​    history则是react-router中的属性，详细请看文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">linkToChange = (url) =&gt; &#123;</span><br><span class="line">  const &#123; history &#125; = this.props;</span><br><span class="line">  history.push(url);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">handleOpen = (id,type) =&gt; &#123;</span><br><span class="line">  this.setState(&#123; open: true, id: id &#125;);</span><br><span class="line">  if(type) &#123;</span><br><span class="line">    this.linkToChange(`theme/edit/$&#123;id&#125;`);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>#3.基于Antd的Form实现</p>
<p>​    Antd的官网<a href="https://ant.design/index-cn，提供了所有Antd的组件代码api以及demo代码，甚至打开codePen就可以在线编辑，非常的方便，阅读Antd的组件代码，也是学习进步的好机会" target="_blank" rel="noopener">https://ant.design/index-cn，提供了所有Antd的组件代码api以及demo代码，甚至打开codePen就可以在线编辑，非常的方便，阅读Antd的组件代码，也是学习进步的好机会</a></p>
<p>##3.1查询表单的实现</p>
<p>​    一个简单的基本查询表单实现，具有搜索，重置功能，查询条件可以定义业务需要的组件</p>
<p>效果图：<br>​    <img src="./image/1.png" alt="1"></p>
<p>​    定义了一个搜索子组件，并用Antd的提供的Form.create()方法，对组件进行包装，可以使用一系列的包装方法，比如得到特定组<code>FormItem</code>的输入值，改变，删除特定组的值,等等，详细请看官网API说明。</p>
<p>​    这里用到了Antd的布局组件Row和Col,以及一个下拉框组件Select，在这里，搜索以及清空按钮的方法是由父组件传进去的，当然你也可以在子组件里写，但要注意，子组件以及父组件的通信规则，这比较基础也比较重要，网上有很多博客介绍，可以看看。</p>
<p>​    父组件可以拿到子组件的引用，从而可以控制子组件的行为，这里清空按钮，直接调用子组件resetFields()方法。</p>
<p>​    搜索方法则是调用子组件validateFields([fieldNames: string[]], options: object, callback: Function(errors, values))方法，校验并获取一组输入域的值与 Error，若 fieldNames 参数为空，则校验全部组件，之后执行回掉函数callback,在这里可以发送搜索请求。</p>
<p>代码:</p>
<font size="1.5"><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">/*父组件的两个方法*/</span><br><span class="line">  /**</span><br><span class="line">   * Search子组件搜索</span><br><span class="line">   */</span><br><span class="line">  handleSearch = () =&gt; &#123;</span><br><span class="line">    /*获取Search子组件表单值*/</span><br><span class="line">    let connectionId,tableName,tableStatus,schemaName;</span><br><span class="line">    this.searchFormRef.validateFields([&quot;connectionId-search&quot;,&quot;tableName-search&quot;,&quot;tableStatus-search&quot;,&quot;schemaName-search&quot;],(err, values) =&gt; &#123;</span><br><span class="line">      connectionId=values[&apos;connectionId-search&apos;]||&quot;&quot;;</span><br><span class="line">      tableName=values[&apos;tableName-search&apos;]||&quot;&quot;;</span><br><span class="line">      tableStatus=values[&apos;tableStatus-search&apos;]||&quot;&quot;;</span><br><span class="line">      schemaName=values[&apos;schemaName-search&apos;]||&quot;&quot;;</span><br><span class="line">      let organizationId = 1;</span><br><span class="line">      let page = 0;</span><br><span class="line">      const &#123;CreateTableStore&#125;= this.props;</span><br><span class="line">      this.setState(&#123;</span><br><span class="line">        page : 0,</span><br><span class="line">        connectionId: connectionId,</span><br><span class="line">        tableName:tableName,</span><br><span class="line">        tableStatus : tableStatus,</span><br><span class="line">        schemaName : schemaName,</span><br><span class="line">      &#125;);</span><br><span class="line">      //下面就是调用mobx仓库CreateTableStore的loadCreateTable查询方法</span><br><span class="line">      //每个</span><br><span class="line">      CreateTableStore.loadCreateTable(organizationId,page,connectionId,tableName,tableStatus,schemaName);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 清除Search子组件表单数据</span><br><span class="line">   */</span><br><span class="line">  resetSearch = () =&gt; &#123;</span><br><span class="line">    this.searchFormRef.resetFields();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">/*搜索子组件*/</span><br><span class="line">const CommonSearch = Form.create()(</span><br><span class="line">  (props) =&gt;&#123;</span><br><span class="line">    /*引入父类属性*/</span><br><span class="line">    const &#123;form,resetSearch,handleSearch,optionConnection&#125; = props;</span><br><span class="line">    const &#123; getFieldDecorator &#125; = form;</span><br><span class="line">    </span><br><span class="line">    /*form表单布局*/</span><br><span class="line">    const formItemLayout = &#123;</span><br><span class="line">      labelCol: &#123; span: 8 &#125;,</span><br><span class="line">      wrapperCol: &#123; span: 16 &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    return (</span><br><span class="line">      &lt;Form style=&#123;&#123;paddingTop: 20,background: &quot;#fbfbfb&quot;, border: &quot;1px solid #d9d9d9&quot;,borderRadius: 4,margin:5&#125;&#125;&gt;</span><br><span class="line">        &lt;Row gutter=&#123;20&#125;&gt;</span><br><span class="line">          &#123;/*name*/&#125;</span><br><span class="line">          &lt;Col span=&#123;6&#125;&gt;</span><br><span class="line">            &lt;FormItem &#123;...formItemLayout&#125; label=&quot;数据源名称:&quot;&gt;</span><br><span class="line">              &#123;getFieldDecorator(`connectionId-search`,&#123;</span><br><span class="line">                initialValue: &quot;&quot;</span><br><span class="line">              &#125;)(</span><br><span class="line">                &lt;Select</span><br><span class="line">                         showSearch</span><br><span class="line">                         style=&#123;&#123; width: 200 &#125;&#125;</span><br><span class="line">                         optionFilterProp=&quot;children&quot;</span><br><span class="line">                         filterOption=&#123;(input, option) =&gt; option.props.children.toLowerCase().indexOf(input.toLowerCase()) &gt;= 0&#125;</span><br><span class="line">                &gt;</span><br><span class="line">                  &#123;optionConnection&#125;</span><br><span class="line">                &lt;/Select&gt;</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/FormItem&gt;</span><br><span class="line">          &lt;/Col&gt;</span><br><span class="line">          &#123;/*description*/&#125;</span><br><span class="line">          &lt;Col span=&#123;6&#125;&gt;</span><br><span class="line">            &lt;FormItem &#123;...formItemLayout&#125; label=&quot;DB名称:&quot;&gt;</span><br><span class="line">              &#123;getFieldDecorator(`schemaName-search`)(</span><br><span class="line">                &lt;Input placeholder=&quot;请输入DB名称&quot; /&gt;</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/FormItem&gt;</span><br><span class="line">          &lt;/Col&gt;</span><br><span class="line">          &lt;Col span=&#123;6&#125;&gt;</span><br><span class="line">            &lt;FormItem &#123;...formItemLayout&#125; label=&quot;表名:&quot;&gt;</span><br><span class="line">              &#123;getFieldDecorator(`tableName-search`)(</span><br><span class="line">                &lt;Input placeholder=&quot;请输入表名&quot; /&gt;</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/FormItem&gt;</span><br><span class="line">          &lt;/Col&gt;</span><br><span class="line">          &lt;Col span=&#123;6&#125;&gt;</span><br><span class="line">            &lt;FormItem &#123;...formItemLayout&#125; label=&quot;创建状态:&quot;&gt;</span><br><span class="line">              &#123;getFieldDecorator(`tableStatus-search`,&#123;</span><br><span class="line">                initialValue: &quot;&quot;</span><br><span class="line">              &#125;)(</span><br><span class="line">                &lt;Select placeholder=&quot;请选择创建状态&quot;&gt;</span><br><span class="line">                  &lt;Option value=&quot;NEW&quot;&gt;新建&lt;/Option&gt;</span><br><span class="line">                  &lt;Option value=&quot;CREATED&quot;&gt;已创建&lt;/Option&gt;</span><br><span class="line">                &lt;/Select&gt;</span><br><span class="line">              )&#125;</span><br><span class="line">            &lt;/FormItem&gt;</span><br><span class="line">          &lt;/Col&gt;</span><br><span class="line">        &lt;/Row&gt;</span><br><span class="line">        &lt;Row style=&#123;&#123;marginBottom:5&#125;&#125;&gt;</span><br><span class="line">          &#123;/*搜索&amp;重置*/&#125;</span><br><span class="line">          &lt;Col span=&#123;24&#125; style=&#123;&#123;textAlign:&quot;right&quot;&#125;&#125;&gt;</span><br><span class="line">            &lt;Button onClick=&#123;handleSearch&#125; icon=&quot;search&quot; type=&quot;primary&quot;&gt;搜索&lt;/Button&gt;</span><br><span class="line">            &lt;Button onClick=&#123;resetSearch&#125; icon=&quot;reload&quot; style=&#123;&#123;marginLeft : 10,marginRight:20&#125;&#125;&gt;清空&lt;/Button&gt;</span><br><span class="line">          &lt;/Col&gt;</span><br><span class="line">        &lt;/Row&gt;</span><br><span class="line">      &lt;/Form&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><br></font>

<p>##3.2头行结构的批量新增及保存</p>
<p>​    有的时候，对于头行结构的数据录入，采用如下图所示的方式录入，编辑头信息，可以动态的增减行信息，最后一起提交，这样很方便，而不是让用户先建个表头，再进入表头，去创建表行</p>
<p>效果图:</p>
<p><img src="./image/2.png" alt="2"></p>
<p>伪代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">**原理就是在form对象里声明一个集合keys=[],用来保存表单项的索引</span><br><span class="line"> *表单项就根据数据keys动态生成</span><br><span class="line"> *每次增加或者减少，就会改变keys</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">//定义formItems,动态变化的表单项</span><br><span class="line"> form.getFieldDecorator(&apos;keys&apos;, &#123; initialValue: [] &#125;);</span><br><span class="line">  const keys = getFieldValue(&apos;keys&apos;);</span><br><span class="line"> const formItems = keys.map((k, index) =&gt; &#123;</span><br><span class="line">      return (</span><br><span class="line">         &lt;FormItem</span><br><span class="line">            label=&#123;&apos;***&apos;&#125;</span><br><span class="line">            key=&#123;k&#125;</span><br><span class="line">          &gt;</span><br><span class="line">          &lt;/FormItem&gt;</span><br><span class="line">        ...</span><br><span class="line">      )</span><br><span class="line"> &#125;</span><br><span class="line">//组件render渲染返回的元素</span><br><span class="line">&lt;Form&gt;</span><br><span class="line">  //表头</span><br><span class="line">  &lt;FormItem&gt;</span><br><span class="line">  &lt;/FormItem&gt;</span><br><span class="line">  ...</span><br><span class="line">  //表行，动态增加</span><br><span class="line">  &#123;formItems&#125;</span><br><span class="line">&lt;/Form&gt;</span><br><span class="line">/*两个核心函数一个增加表单项的，一个减少表单项的*/</span><br><span class="line">        //增加函数，uuid为全局常量 初始值为0</span><br><span class="line"> add = () =&gt; &#123;</span><br><span class="line">    uuid++;</span><br><span class="line">    const &#123; form &#125; = this.props;</span><br><span class="line">    // can use data-binding to get</span><br><span class="line">    const keys = form.getFieldValue(&apos;keys&apos;);</span><br><span class="line">    const nextKeys = keys.concat(uuid);</span><br><span class="line">    // can use data-binding to set</span><br><span class="line">    // important! notify form to detect changes</span><br><span class="line">    form.setFieldsValue(&#123;</span><br><span class="line">      keys: nextKeys,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">     // 减少表单的函数</span><br><span class="line"> remove = (k) =&gt; &#123;</span><br><span class="line">    const &#123; form &#125; = this.props;</span><br><span class="line">    // can use data-binding to get</span><br><span class="line">    const keys = form.getFieldValue(&apos;keys&apos;);</span><br><span class="line">    // can use data-binding to set</span><br><span class="line">    form.setFieldsValue(&#123;</span><br><span class="line">      keys: keys.filter(key =&gt; key !== k),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>##3.3根据选择条件，动态的改变表单项</p>
<p>​    有了上面的基础，实现这个功能并不难</p>
<p>​    效果图:</p>
<p>​    <img src="./image/3.png" alt="3"></p>
<p>​    左边有两个选择框，各有x,y种选择，那么就会有x*y种的情况，如果是遍历然后去做if判断，确定某种情形，再决定右边的表单项的具体变化情况，这样代码量会很大，很无序，这里有一个相对合理的实现。</p>
<p>​    定义一个map集合，key值存条件，value值存条件对应的formItem组件，那么获取左边的条件时，只需要map.get(“condition”)的方法 就获得右边的表单项，react就会自动渲染好了，这样省去大量逻辑判断，代码也变少了，是不是很方便？</p>
<p>​    核心代码如下：</p>
<font size="1.5"><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">//这步其实没必要，定义一个个表单对象就好了，可以不放map里</span><br><span class="line">    /* 定义输入框映射 */</span><br><span class="line">    const inputChildren = new Map();</span><br><span class="line">    inputChildren</span><br><span class="line">      .set(&apos;serverHostname&apos;, &lt;FormItem</span><br><span class="line">        &#123;...formItemLayout&#125;</span><br><span class="line">        label=&#123;&apos;主机名称: &apos;&#125;</span><br><span class="line">        hasFeedback</span><br><span class="line">        key=&#123;0&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;getFieldDecorator(&apos;serverHostname&apos;, &#123;</span><br><span class="line">          initialValue: DBConns ? DBConns.serverHostname : &apos;&apos;,</span><br><span class="line">          rules: [&#123; required: true, message: &apos;主机名称是必须的!&apos; &#125;, &#123; validator: this.checkIP &#125;],</span><br><span class="line">        &#125;)(</span><br><span class="line">          &lt;Input /&gt;,</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;/FormItem&gt;) // 主机名称</span><br><span class="line">      .set(&apos;databaseName&apos;, &lt;FormItem</span><br><span class="line">        &#123;...formItemLayout&#125;</span><br><span class="line">        label=&#123;&apos;数据库名称: &apos;&#125;</span><br><span class="line">        hasFeedback</span><br><span class="line">        key=&#123;1&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;getFieldDecorator(&apos;databaseName&apos;, &#123;</span><br><span class="line">          initialValue: DBConns ? DBConns.databaseName : &apos;&apos;,</span><br><span class="line">          rules: [&#123; required: true, message: &apos;数据库名称是必须的!&apos; &#125;],</span><br><span class="line">        &#125;)(</span><br><span class="line">          &lt;Input /&gt;,</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;/FormItem&gt;) // 数据库名称</span><br><span class="line">      .set(&apos;servicePort&apos;, &lt;FormItem</span><br><span class="line">        &#123;...formItemLayout&#125;</span><br><span class="line">        label=&#123;&apos;端口号: &apos;&#125;</span><br><span class="line">        hasFeedback</span><br><span class="line">        key=&#123;2&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;getFieldDecorator(&apos;servicePort&apos;, &#123;</span><br><span class="line">          initialValue: DBConns ? DBConns.servicePort : &apos;&apos;,</span><br><span class="line">          rules: [&#123; required: true, message: &apos;端口号是必须的!&apos; &#125;, &#123; validator: this.checkPort &#125;],</span><br><span class="line">        &#125;)(</span><br><span class="line">          &lt;InputNumber min=&#123;1&#125; max=&#123;65535&#125;/&gt;,</span><br><span class="line">        )&#125;</span><br><span class="line">      &lt;/FormItem&gt;) // 端口号</span><br><span class="line">     ...</span><br><span class="line">     ...</span><br><span class="line">     ...); // SID</span><br><span class="line">//下面是关键</span><br><span class="line">/* 定义连接类型-连接方式决定的设置页映射 */</span><br><span class="line">    const typeMap = new Map();</span><br><span class="line">    typeMap</span><br><span class="line">      .set(&apos;Hadoop Hive2,Native(JDBC)&apos;, [</span><br><span class="line">        inputChildren.get(&apos;serverHostname&apos;),</span><br><span class="line">        inputChildren.get(&apos;databaseName&apos;),</span><br><span class="line">        inputChildren.get(&apos;servicePort&apos;),</span><br><span class="line">        inputChildren.get(&apos;userName&apos;),</span><br><span class="line">        inputChildren.get(&apos;password&apos;),</span><br><span class="line">      ])</span><br><span class="line">      .set(&apos;Hadoop Hive,Native(JDBC)&apos;, [</span><br><span class="line">        inputChildren.get(&apos;serverHostname&apos;),</span><br><span class="line">        inputChildren.get(&apos;databaseName&apos;),</span><br><span class="line">        inputChildren.get(&apos;servicePort&apos;),</span><br><span class="line">        inputChildren.get(&apos;userName&apos;),</span><br><span class="line">        inputChildren.get(&apos;password&apos;),</span><br><span class="line">      ])</span><br><span class="line">      .set(&apos;MySQL,Native(JDBC)&apos;, [</span><br><span class="line">        inputChildren.get(&apos;serverHostname&apos;),</span><br><span class="line">        inputChildren.get(&apos;databaseName&apos;),</span><br><span class="line">        inputChildren.get(&apos;servicePort&apos;),</span><br><span class="line">        inputChildren.get(&apos;userName&apos;),</span><br><span class="line">        inputChildren.get(&apos;password&apos;),</span><br><span class="line">      ])</span><br><span class="line">      .set(&apos;MySQL,ODBC&apos;, [</span><br><span class="line">        inputChildren.get(&apos;odbcDSBName&apos;),</span><br><span class="line">        inputChildren.get(&apos;userName&apos;),</span><br><span class="line">        inputChildren.get(&apos;password&apos;),</span><br><span class="line">      ])</span><br><span class="line">      .set(&apos;MySQL,JNDI&apos;, [</span><br><span class="line">        inputChildren.get(&apos;JNDIName&apos;),</span><br><span class="line">      ])</span><br><span class="line">   ...</span><br><span class="line">   ...</span><br><span class="line">   ...;</span><br><span class="line"></span><br><span class="line">    /* 根据连接类型和连接方式动态决定设置页 */</span><br><span class="line">    const children = [...typeMap.get(`$&#123;this.state.dbType&#125;,$&#123;this.state.accType&#125;`)];</span><br><span class="line">//</span><br></pre></td></tr></table></figure><br><br></font>

<p>#4.基于Antd的Table实现</p>
<p>​        kendoUI帮我们封装了大量的行为，很多东西只需要按照规定的格式，把属性写好，那么就可以实现复杂功能了，但是Antd比较年轻，封装的也没有kendoUI那么彻底和精细，很多东西就要自己手动实现，比较麻烦，也比较自由，你可以自己定义封装组件，封装一个复杂的功能，以复用，kendo也可以，可没有react这么方便和高效了</p>
<p>##4.1查询分页的处理</p>
<p>​    这个很简单，没什么干货，Antd定义了Pagination组件，效果如下，api文档都有,page以及size还有查询条件的值一般放在主组件的state里，这样每次查询和翻页，都能获得当前的查询条件</p>
<p>效果:</p>
<p>​    <img src="./image/4.png" alt="4"></p>
<p>代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Pagination total=&#123;CreateTableStore.getTotalSize&#125; pageSize=&#123;10&#125; current=&#123;this.state.page + 1&#125;</span><br><span class="line">                    onChange=&#123;page =&gt; this.loadCreateTables(page - 1)&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>##4.2行内编辑的实现</p>
<p>​    这种行内编辑kendoUI实现起来非常简单，但在Antd这里就没有那么轻松了。</p>
<p>​    但只要你想，你在这里，可以做你任何想做的行内编辑样式，并且很方便，我这里提供一个简单的实现，也是官网上的demo改变而来。</p>
<p>​    效果图如下:    </p>
<p>​    <img src="./image/5.png" alt="5"></p>
<p>​          主要原理是，定义一个EditableCell子组件用来对处于不同编辑状态的单元格进行不同的渲染，点击编辑按钮，则渲染为编辑状态，取消按钮则渲染为正常状态，看源码可以得知，通过editable这个布尔标志进行判断，唯一的难点在于，在点保存按钮的时候，子组件EditableCell里用户当前输入的值，主组件并不能立即拿到，给后台传过去，这里引入一个暂存的概念，我们把用户输入的数据实时的保存在父组件里的cacheData里，而不会改变用于前台table展示的dataSource值，如果用户点击确认保存，那么就把暂存数据cacheData提交到后台，前台table展示的dataSource值随之也发生改变。</p>
<p>​      但还有一个问题，cacheData里的数据并不是都要提交到后台的，可能是点击取消之后的遗留数据，这里我做这样的处理，每次点击取消就把该条数据添加属性状态码status,值为‘cancel’，初始点击则为’save’，最后保存的时候，遍历cacheData，把状态为’save’,传到后台，这是本次编辑需要更新的数据，那么更新之后，继续把状态码改为‘cancel’。</p>
<p>​    这样实现感觉有点麻烦了，如果有什么好的建议和实现，可以跟我交流下哦。</p>
<p> 代码如下:</p>
<font size="1.5"><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class EditableCell extends React.Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    value: this.props.value,</span><br><span class="line">    editable: this.props.editable || false,</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">    if (nextProps.editable !== this.state.editable) &#123;</span><br><span class="line">      this.setState(&#123; editable: nextProps.editable &#125;);</span><br><span class="line">      if (nextProps.editable) &#123;</span><br><span class="line">        this.cacheValue = this.state.value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (nextProps.__status &amp;&amp; nextProps.__status !== this.props.__status) &#123;</span><br><span class="line">      if (nextProps.__status === &apos;save&apos;) &#123;</span><br><span class="line">        this.props.onChange(this.state.value);</span><br><span class="line">      &#125; else if (nextProps.__status === &apos;cancel&apos;) &#123;</span><br><span class="line">        this.setState(&#123; value: this.cacheValue &#125;);</span><br><span class="line">        this.props.onChange(this.cacheValue);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">    return nextProps.editable !== this.state.editable ||</span><br><span class="line">      nextState.value !== this.state.value;</span><br><span class="line">  &#125;</span><br><span class="line">  handleChange(e) &#123;</span><br><span class="line">    const value = e.target.value;</span><br><span class="line">    this.props.cacheForSave(value);</span><br><span class="line">    this.setState(&#123; value &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; value, editable &#125; = this.state;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          editable ?</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;Input</span><br><span class="line">                value=&#123;value&#125;</span><br><span class="line">                onChange=&#123;e =&gt; this.handleChange(e)&#125;</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            :</span><br><span class="line">            &lt;div className=&quot;editable-row-text&quot;&gt;</span><br><span class="line">              &#123;value || &apos; &apos;&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class EditableTable extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.editDone = this.editDone.bind(this);</span><br><span class="line">    this.handleChange = this.handleChange.bind(this);</span><br><span class="line"></span><br><span class="line">    const &#123; dataSource &#125; = this.props;</span><br><span class="line">    for (const d in dataSource) &#123;</span><br><span class="line">      dataSource[d].editable = false;</span><br><span class="line">    &#125;</span><br><span class="line">    this.state = &#123;</span><br><span class="line">      data: dataSource,</span><br><span class="line">      cacheData: dataSource,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  renderColumns(data, index, key, text) &#123;</span><br><span class="line">    const &#123; editable, __status &#125; = data[index];</span><br><span class="line">    if (typeof editable === &apos;undefined&apos;) &#123;</span><br><span class="line">      return text;</span><br><span class="line">    &#125;</span><br><span class="line">    return (&lt;EditableCell</span><br><span class="line">      editable=&#123;editable&#125;</span><br><span class="line">      value=&#123;text&#125;</span><br><span class="line">      onChange=&#123;value =&gt; this.handleChange(key, index, value)&#125;</span><br><span class="line">      __status=&#123;__status&#125;</span><br><span class="line">      cacheForSave=&#123;value =&gt; this.handleCache(key, index, value)&#125;</span><br><span class="line">    /&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">  handleCache(key, index, value) &#123;</span><br><span class="line">    const &#123; cacheData &#125; = this.state;</span><br><span class="line">    cacheData[index][key] = value;</span><br><span class="line">    this.setState(&#123; cacheData &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  handleChange(key, index, value) &#123;</span><br><span class="line">    const &#123; data &#125; = this.state;</span><br><span class="line">    data[index][key] = value;</span><br><span class="line">    this.setState(&#123; data &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  edit(index) &#123;</span><br><span class="line">    const &#123; data &#125; = this.state;</span><br><span class="line">    Object.keys(data[index]).forEach((item) =&gt; &#123;</span><br><span class="line">      if (data[index] &amp;&amp; typeof data[index].editable !== &apos;undefined&apos;) &#123;</span><br><span class="line">        data[index].editable = true;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    this.setState(&#123; data &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  editDone(index, type) &#123;</span><br><span class="line">    const &#123; ThemeServerStore &#125; = this.props;</span><br><span class="line">    const tmp = ThemeServerStore.changeRow;</span><br><span class="line">    const &#123; cacheData &#125; = this.state;</span><br><span class="line">    const &#123; data &#125; = this.state;</span><br><span class="line">    // 调用父组件更新操作</span><br><span class="line">    if (type == &apos;save&apos;) &#123;</span><br><span class="line">      const createData = [];</span><br><span class="line">      const &#123; cacheData &#125; = this.state;</span><br><span class="line">      cacheData[index].__status = &apos;save&apos;;</span><br><span class="line">      const &#123; themeName, themeDescription, __status, themeId, objectVersionNumber &#125; = cacheData[index];</span><br><span class="line">      const theme = &#123; themeName, themeDescription, __status, themeId, objectVersionNumber &#125;;</span><br><span class="line">      createData.push(theme);</span><br><span class="line">      const &#123; ThemeServerStore &#125; = this.props;</span><br><span class="line">      ThemeServerStore.updateThemeServer(createData, (error) =&gt; &#123;</span><br><span class="line">        if (error) &#123;</span><br><span class="line">          type = &apos;cancel&apos;;</span><br><span class="line">          Modal.error(&#123;</span><br><span class="line">            title: &apos;错误提示&apos;,</span><br><span class="line">            content: &apos;该任务组已经存在！&apos;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        Object.keys(data[index]).forEach((item) =&gt; &#123;</span><br><span class="line">          if (data[index] &amp;&amp; typeof data[index].editable !== &apos;undefined&apos;) &#123;</span><br><span class="line">            data[index].editable = false;</span><br><span class="line">            data[index].__status = type;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        this.setState(&#123; data &#125;, () =&gt; &#123;</span><br><span class="line">          Object.keys(data[index]).forEach((item) =&gt; &#123;</span><br><span class="line">            if (data[index] &amp;&amp; typeof data[index].editable !== &apos;undefined&apos;) &#123;</span><br><span class="line">              delete data[index].__status;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      Object.keys(data[index]).forEach((item) =&gt; &#123;</span><br><span class="line">        if (data[index] &amp;&amp; typeof data[index].editable !== &apos;undefined&apos;) &#123;</span><br><span class="line">          data[index].editable = false;</span><br><span class="line">          data[index].__status = type;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      this.setState(&#123; data &#125;, () =&gt; &#123;</span><br><span class="line">        Object.keys(data[index]).forEach((item) =&gt; &#123;</span><br><span class="line">          if (data[index] &amp;&amp; typeof data[index].editable !== &apos;undefined&apos;) &#123;</span><br><span class="line">            delete data[index].__status;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleDelete(v, type) &#123;</span><br><span class="line">    this.props.handleOpen(v, type);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; data &#125; = this.state;</span><br><span class="line">    const columns = [&#123;</span><br><span class="line">      title: &apos;任务组&apos;,</span><br><span class="line">      dataIndex: &apos;themeName&apos;,</span><br><span class="line">      key: &apos;themeName&apos;,</span><br><span class="line">      width: &apos;25%&apos;,</span><br><span class="line">      render: (text, record, index) =&gt; this.renderColumns(this.state.data, index, &apos;themeName&apos;, text),</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      title: &apos;任务组描述&apos;,</span><br><span class="line">      dataIndex: &apos;themeDescription&apos;,</span><br><span class="line">      key: &apos;themeDescription&apos;,</span><br><span class="line">      width: &apos;15%&apos;,</span><br><span class="line">      render: (text, record, index) =&gt; this.renderColumns(this.state.data, index, &apos;themeDescription&apos;, text),</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      title: &apos;层操作&apos;,</span><br><span class="line">      dataIndex: &apos;type&apos;,</span><br><span class="line">      key: &apos;type&apos;,</span><br><span class="line">      render: (text, record) =&gt; (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;Tooltip title=&#123;HAP.languageChange(&apos;edit&apos;)&#125; placement=&quot;bottom&quot; &gt;</span><br><span class="line">            &lt;Button onClick=&#123;() =&gt; this.handleDelete(record.themeId, &apos;openNewTab&apos;)&#125;&gt;编辑层&lt;/Button&gt;</span><br><span class="line">          &lt;/Tooltip&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      ),</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      title: &apos;operation&apos;,</span><br><span class="line">      dataIndex: &apos;operation&apos;,</span><br><span class="line">      render: (text, record, index) =&gt; &#123;</span><br><span class="line">        const &#123; editable &#125; = this.state.data[index];</span><br><span class="line">        return (</span><br><span class="line">          &lt;div className=&quot;editable-row-operations&quot;&gt;</span><br><span class="line">            &#123;</span><br><span class="line">              editable ?</span><br><span class="line">                &lt;span&gt;</span><br><span class="line">                  &lt;a onClick=&#123;() =&gt; this.editDone(index, &apos;save&apos;)&#125;&gt;Save&lt;/a&gt;</span><br><span class="line">                  &lt;Popconfirm title=&quot;Sure to cancel?&quot; onConfirm=&#123;() =&gt; this.editDone(index, &apos;cancel&apos;)&#125;&gt;</span><br><span class="line">                    &lt;a&gt;Cancel&lt;/a&gt;</span><br><span class="line">                  &lt;/Popconfirm&gt;</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line">                :</span><br><span class="line">                &lt;span&gt;</span><br><span class="line">                  &lt;a onClick=&#123;() =&gt; this.edit(index)&#125;&gt;Edit&lt;/a&gt;</span><br><span class="line">                  &lt;Tooltip title=&#123;HAP.languageChange(&apos;delete&apos;)&#125; placement=&quot;bottom&quot; &gt;</span><br><span class="line">                    &lt;a className=&quot;operateIcon small-tooltip&quot; onClick=&#123;() =&gt; this.handleDelete(record.themeId)&#125;&gt;</span><br><span class="line">                      &lt;Icon type=&quot;delete&quot; /&gt;</span><br><span class="line">                    &lt;/a&gt;</span><br><span class="line">                  &lt;/Tooltip&gt;</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;];</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;&lt;Modal</span><br><span class="line">        title=&quot;Basic Modal&quot;</span><br><span class="line">        visible=&#123;this.state.visible&#125;</span><br><span class="line">        onOk=&#123;this.handleOk&#125;</span><br><span class="line">        onCancel=&#123;this.handleCancel&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;Table bordered columns=&#123;columns&#125; pagination=&#123;false&#125; dataSource=&#123;data&#125; rowKey=&quot;themeId&quot; /&gt;</span><br><span class="line">      &lt;/div&gt;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></font>

<p>##4.3单元格编辑并实现批量新增和编辑的功能</p>
<p>​    有了上面的基础，那实现这个功能也是相当简单，代码我就不展示了，原理和行内编辑有点相同，就是新增的数据，由于没有Id，你可以加个状态码’add’，编辑的则为’save’，当然也可以不加，后台根据Id的有无自行判断。</p>
<p>​    这里的实现很简单，编辑都是渲染简单的Input框，当然可以做的复杂点，渲染不同的组件。</p>
<p>效果图:</p>
<p><img src="./image/6.png" alt="6"></p>
<p>#5.弹框</p>
<p>​    弹框 Modal  Antd实现的组件，从界面弹出一个悬框，非常的有用，可以弹出你任何你想做的功能，因为可以在Modal里添加任何子组件，你也可以对这个modal进行二次封装，做出HAP之前的LOV的效果。</p>
<p>​    下面是我项目上实现的部分Modal弹框效果:</p>
<p>​    </p>
<p>这个是Modal里包动态变化的Form表单</p>
<p><img src="./image/modal.png" alt="modal"></p>
<p>​    下面这个就比较复杂了，一共有三个弹框，层层弹出，展示了比较复杂的业务逻辑。<br><img src="./image/m4.png" alt="m4"></p>
<p><img src="./image/m3.png" alt="m3"></p>
<p>​    这是一个成功信息框，modal.success({})就可以直接调用出来了</p>
<p><img src="./image/m5.png" alt="m5"></p>
<p>​    代码就比较多了，这里就不贴了，把官网了简单demo看一下，就能实现比较简单的业务逻辑了，如果对上面实现比较感兴趣的，可以联系我把源码给你。</p>
<p>#6.下拉级联</p>
<p>##6.1常规下拉级联</p>
<p>​    这个很简单，原理就是点击第一个下拉框的时候，改变下一个下拉框的数据源，熟悉react数据流动规则就很好做了。</p>
<p>​    效果图:</p>
<p><img src="./image/7.png" alt="7"></p>
<p><img src="./image/8.png" alt="8"></p>
<p>​    代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"> //组件里的 onThemeIdChange_batch方法</span><br><span class="line">  onThemeIdChange_batch=(value)=&gt;&#123;</span><br><span class="line">    let &#123;currentData&#125; =this.state;</span><br><span class="line">    currentData.themeId=value.key;</span><br><span class="line">    currentData.themeName=value.label;</span><br><span class="line">    currentData.layerId=&apos;&apos;;</span><br><span class="line">    currentData.layerName=&apos;&apos;;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      newThemeId : value.key,</span><br><span class="line">      currentData : currentData,</span><br><span class="line">      newLayerName : &apos;&apos;,</span><br><span class="line">      newLayerId : &apos;&apos;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    const &#123;DispatchJobStore&#125;= this.props;</span><br><span class="line">    DispatchJobStore.getAllLayerThemeId(value.key).then(data=&gt;&#123;</span><br><span class="line">      this.setState(&#123;</span><br><span class="line">        layerData : data,</span><br><span class="line"></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//render里渲染的组件代码</span><br><span class="line">&lt;Row type=&quot;flex&quot; justify=&quot;center&quot;&gt;</span><br><span class="line">              &lt;Col span=&#123;4&#125; &gt;</span><br><span class="line">              选择任务组：</span><br><span class="line">              &lt;/Col&gt;</span><br><span class="line">              &lt;Col span=&#123;8&#125;&gt;</span><br><span class="line"></span><br><span class="line">                &lt;Select  labelInValue  value=&#123;&#123; key:newThemeId &#125;&#125;</span><br><span class="line">                         onChange=&#123;this.onThemeIdChange_batch&#125;</span><br><span class="line">                         showSearch</span><br><span class="line">                         style=&#123;&#123; width: 200 &#125;&#125;</span><br><span class="line">                         optionFilterProp=&quot;children&quot;</span><br><span class="line">                         filterOption=&#123;(input, option) =&gt; option.props.children.toLowerCase().indexOf(input.toLowerCase()) &gt;= 0&#125;</span><br><span class="line">                &gt;</span><br><span class="line">                  &#123;optionThemeId&#125;</span><br><span class="line">                &lt;/Select&gt;</span><br><span class="line">              &lt;/Col&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/Row&gt;</span><br><span class="line">          &lt;br/&gt;</span><br><span class="line">            &lt;Row type=&quot;flex&quot; justify=&quot;center&quot;&gt;</span><br><span class="line">              &lt;Col span=&#123;4&#125; &gt;</span><br><span class="line">              选择层次：</span><br><span class="line">              &lt;/Col&gt;</span><br><span class="line">              &lt;Col span=&#123;8&#125; &gt;</span><br><span class="line"></span><br><span class="line">                &lt;Select   labelInValue  value=&#123;&#123; label:newLayerName &#125;&#125;</span><br><span class="line">                          onChange=&#123;this.onLayerIdChange_batch&#125;</span><br><span class="line">                          showSearch</span><br><span class="line">                          style=&#123;&#123; width: 200 &#125;&#125;</span><br><span class="line">                          optionFilterProp=&quot;children&quot;</span><br><span class="line">                          filterOption=&#123;(input, option) =&gt; option.props.children.toLowerCase().indexOf(input.toLowerCase()) &gt;= 0&#125;</span><br><span class="line">                &gt;</span><br><span class="line">                  &#123;optionLayerId&#125;</span><br><span class="line">                &lt;/Select&gt;</span><br><span class="line">              &lt;/Col&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/Row&gt;</span><br></pre></td></tr></table></figure>
<p>##6.2Antd封装的下拉级联组件Cascader</p>
<p>​        我们还可以用Antd下拉级联组件Cascader，做出如下的效果，可以看下官网的demo，很简单的</p>
<p><img src="./image/9.png" alt="9"></p>
<p>#7.批量选择器Select</p>
<p>​    Antd里的下拉框可以做出批量选择的动作，也可以对数据进行筛选，利用这个可以做出批量创建的动作。</p>
<p><img src="./image/19.png" alt="19"></p>
<p>​    </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/21/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江文">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Javon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/21/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-21T19:59:29+08:00">
                2017-11-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">江文</p>
              <p class="site-description motion-element" itemprop="description">永远相信美好的事情会发生</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">江文</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
